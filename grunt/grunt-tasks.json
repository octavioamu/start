{
  "development": "../app/",
  "dev_assets": "<%= development %>assets/",
  "dev_fonts": "<%= dev_assets %>fonts/",
  "dev_images": "<%= dev_assets %>images/",
  "dev_less": "<%= dev_assets %>less/",
  "dev_stylesheets": "<%= dev_assets %>stylesheets/",
  "dev_javascripts": "<%= dev_assets %>javascripts/",

  "production": "../public/",
  "prod_assets": "<%= production %>assets/",
  "prod_fonts": "<%= prod_assets %>fonts/",
  "prod_images": "<%= prod_assets %>images/",
  "prod_stylesheets": "<%= prod_assets %>stylesheets/",
  "prod_javascripts": "<%= prod_assets %>javascripts/",

  "url": "<%= production %>index.html",

  "less": {
    "site": {
      "files": {
        "<%= dev_stylesheets %>application.css": "<%= dev_less %>import.less"
      }
    }
  },

  "csso": {
    "compress": {
      "options": {
        "report": "min"
      },
      "files": {
        "<%= prod_stylesheets %>application.css": "<%= dev_stylesheets %>application.css"
      }
    }
  },

  "concat": {
    "dist": {
      "src": [
        "<%= dev_javascripts %>specifics/*.js",
        "<%= dev_javascripts %>plugins/*.js"
      ],
      "dest": "<%= dev_javascripts %>application.js"
    }
  },

  "copy": {
    "fonts": {
      "expand": true,
      "cwd": "<%= dev_fonts %>",
      "src": "*",
      "dest": "<%= prod_assets %>fonts",
      "flatten": true,
      "filter": "isFile"
    },
    "javascripts_lib": {
      "expand": true,
      "cwd": "<%= dev_javascripts %>lib/",
      "src": "*",
      "dest": "<%= prod_javascripts %>lib/",
      "flatten": true,
      "filter": "isFile"
    }
  },

  "jshint": {
    "files":[
      "<%= dev_javascripts %>specifics/*.js",
      "<%= dev_javascripts %>plugins/*.js"
    ],
    "options": {
      "globals": {
        "jQuery": true,
        "console": true,
        "module": true
      },
      "bitwise": true,
      "expr": true
    }
  },

  "uglify": {
    "options": {
      "compress": true,
      "mangle": {
        "except": ["jQuery"]
      }
    },
    "my_target": {
      "files": {
        "<%= prod_javascripts %>application.js": "<%= dev_javascripts %>application.js"
      }
    }
  },

  "htmlbuild": {
    "dist": {
      "src": "<%= development %>views/*.html",
      "dest": "<%= development %>",
      "options": {
        "sections": {
          "head": "<%= development %>partials/head.html",
          "main-header": "<%= development %>partials/main-header.html",
          "main-footer": "<%= development %>partials/main-footer.html",
          "main-aside": "<%= development %>partials/main-aside.html"
        }
      }
    }
  },

  "htmlmin": {
    "dist": {
      "options": {
        "removeComments": true,
        "collapseWhitespace": true,
        "collapseBooleanAttributes": true,
        "removeRedundantAttributes": true,
        "removeEmptyAttributes": true,
        "removeOptionalTags": true,
        "useShortDoctype": true
      },
      "expand": true,
      "cwd": "<%= development %>",
      "src": ["*.html"],
      "dest": "<%= production %>"
    }
  },

  "sprite": {
    "all": {
      "src": "<%= dev_images %>sprite/*.png",
      "destImg": "<%= dev_images %>sprite.png",
      "destCSS": "<%= dev_less %>sprite.less",
      "algorithm": "left-right",
      "padding": 2
    }
  },

  "imagemin": {
    "all": {
      "cwd": "<%= dev_images %>",
      "expand": true,
      "src": ["*.{png,jpg,gif}"],
      "dest": "<%= prod_images %>"
    }
  },

  "watch": {
    "options": {
      "livereload": true
    },
    "javascripts": {
      "files": [
        "<%= dev_javascripts %>**/*.js",
        "!<%= dev_javascripts %>application.js"
      ],
      "tasks": ["jshint", "concat"]
    },
    "less": {
      "files": [
        "<%= dev_less %>**/*.less",
        "<%= dev_les %>*.less"
      ],
      "tasks": ["less"]
    },
    "html": {
      "files": [
        "<%= development %>partials/*.html",
        "<%= development %>views/*.html"
      ],
      "tasks": ["htmlbuild"]
    }
  },

  "open" : {
    "dev" : {
      "path": "<%= url %>"
    }
  },

  "connect": {
    "server": {
      "options": {
        "port": 9000,
        "base": ".",
        "hostname": "localhost",
        "livereload": true,
        "open": true
      }
    }
  },

  "concurrent": {
    "style":  ["less", "sprite"],
    "html":   ["htmlbuild"],
    "js":     ["jshint", "concat"],
    "build":  ["csso", "imagemin", "htmlmin", "copy", "uglify", "open"]
  }
}